import pexpect

class GdbShell:
    def __init__(self, binary_path):
        self.binary_path = binary_path
        self.shell = None

    def start_shell(self):
        self.shell = pexpect.spawn(f'pwndbg -q ./{self.binary_path}')
        self.shell.expect("pwndbg>")
        print(self.shell.before.decode())

    def execute_command(self, command):
        self.shell.sendline(command)
        self.shell.expect("pwndbg>")
        return self.shell.before.decode()
    
    def stop_shell(self):
        if self.shell:
            self.shell.sendline('exit')
            self.shell.close()



