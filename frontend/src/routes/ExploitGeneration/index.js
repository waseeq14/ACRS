import { useState, useContext, useEffect } from 'react'
import { AppContext } from '../../context/AppContext'
import Markdown from 'react-markdown'

import styles from './styles.module.css'

export default function ExploitGeneration() {
  const { appState } = useContext(AppContext)

  const [exploit, setExploit] = useState("")

  useEffect(() => {
    if (appState.exploitResult !== undefined) {
      setExploit(appState.exploitResult.result)
    }
  }, [])

  return (
    <>
      <div className={styles.cards}>
        <div className={styles.card}>
          <h2>Exploitability</h2>
          <div className={styles.whiteTextArea}>
            <Markdown>{exploit}</Markdown>
          </div>
        </div>
      </div>
    </>
  )
}
